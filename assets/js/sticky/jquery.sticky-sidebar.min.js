/**
 * sticky-sidebar-v2 - A JavaScript plugin for making smart and high performance sticky sidebars.
 * @version v1.1.0
 * @link https://github.com/blixhavn/sticky-sidebar-v2
 * @author Ã˜ystein Blixhavn
 * @license The MIT License (MIT)
**/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).StickySidebar=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var i=e(function(t,e){!function(t){function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(t,"__esModule",{value:true});var e=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}return function(t,e,i){if(e)n(t.prototype,e);if(i)n(t,i);return t}}(),i=function(){var d=".stickySidebar";var n={topSpacing:0,bottomSpacing:0,containerSelector:false,scrollContainer:false,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",minWidth:false};var t=function(){function h(t){var e=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};r(this,h);this.options=h.extend(n,i);this.sidebar="string"===typeof t?document.querySelector(t):t;if("undefined"===typeof this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=false;this.container=this.sidebar.parentElement;this.affixedType="STATIC";this.direction="down";this.support={transform:false,transform3d:false};this._initialized=false;this._reStyle=false;this._breakpoint=false;this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0};["handleEvent"].forEach(function(t){e[t]=e[t].bind(e)});this.initialize()}e(h,[{key:"initialize",value:function t(){var i=this;this._setSupportFeatures();if(this.options.innerWrapperSelector){this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector);if(null===this.sidebarInner)this.sidebarInner=false}if(!this.sidebarInner){var e=document.createElement("div");e.setAttribute("class","inner-wrapper-sticky");this.sidebar.appendChild(e);while(this.sidebar.firstChild!=e){e.appendChild(this.sidebar.firstChild)}this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var n=document.querySelectorAll(this.options.containerSelector);n=Array.prototype.slice.call(n);n.forEach(function(t,e){if(!t.contains(i.sidebar))return;i.container=t});if(!n.length)throw new Error("The container does not contains on the sidebar.")}this.scrollContainer=this.options.scrollContainer?document.querySelector(this.options.scrollContainer):undefined;if("function"!==typeof this.options.topSpacing)this.options.topSpacing=parseInt(this.options.topSpacing)||0;if("function"!==typeof this.options.bottomSpacing)this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0;this._widthBreakpoint();this.calcDimensions();this.stickyPosition();this.bindEvents();this._initialized=true}},{key:"bindEvents",value:function t(){var e=this;this.eventTarget=this.scrollContainer?this.scrollContainer:window;this.eventTarget.addEventListener("resize",this,{passive:true,capture:false});this.eventTarget.addEventListener("scroll",this,{passive:true,capture:false});this.sidebar.addEventListener("update"+d,this);if("undefined"!==typeof ResizeObserver){var i=new ResizeObserver(function(){return e.handleEvent()});i.observe(this.sidebarInner);i.observe(this.container)}}},{key:"handleEvent",value:function t(e){this.updateSticky(e)}},{key:"calcDimensions",value:function t(){if(this._breakpoint)return;var e=this.dimensions;e.containerTop=h.offsetRelative(this.container).top;e.containerHeight=this.container.clientHeight;e.containerBottom=e.containerTop+e.containerHeight;e.sidebarHeight=this.sidebarInner.offsetHeight;e.sidebarWidth=this.sidebarInner.offsetWidth;e.viewportHeight=window.innerHeight;e.maxTranslateY=e.containerHeight-e.sidebarHeight;this._calcDimensionsWithScroll()}},{key:"_calcDimensionsWithScroll",value:function t(){var e=this.dimensions;e.sidebarLeft=h.offsetRelative(this.sidebar).left;if(this.scrollContainer){e.viewportTop=this.scrollContainer.scrollTop;e.viewportLeft=this.scrollContainer.scrollLeft}else{e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop;e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft}e.viewportBottom=e.viewportTop+e.viewportHeight;e.topSpacing=this.options.topSpacing;e.bottomSpacing=this.options.bottomSpacing;if("function"===typeof e.topSpacing)e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0;if("function"===typeof e.bottomSpacing)e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0;if("VIEWPORT-TOP"===this.affixedType){if(e.topSpacing<e.lastTopSpacing){e.translateY+=e.lastTopSpacing-e.topSpacing;this._reStyle=true}}else if("VIEWPORT-BOTTOM"===this.affixedType){if(e.bottomSpacing<e.lastBottomSpacing){e.translateY+=e.lastBottomSpacing-e.bottomSpacing;this._reStyle=true}}e.lastTopSpacing=e.topSpacing;e.lastBottomSpacing=e.bottomSpacing}},{key:"isSidebarFitsViewport",value:function t(){var e=this.dimensions;var i=this.scrollDirection==="down"?e.lastBottomSpacing:e.lastTopSpacing;return this.dimensions.sidebarHeight+i<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function t(){var e=this.dimensions;if(e.lastViewportTop===e.viewportTop)return;var i="down"===this.direction?Math.min:Math.max;if(e.viewportTop===i(e.viewportTop,e.lastViewportTop))this.direction="down"===this.direction?"up":"down"}},{key:"getAffixType",value:function t(){this._calcDimensionsWithScroll();var e=this.dimensions;var i=e.viewportTop+e.topSpacing;var n=this.affixedType;if(i<=e.containerTop||e.containerHeight<=e.sidebarHeight){e.translateY=0;n="STATIC"}else{n="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown()}e.translateY=Math.max(0,e.translateY);e.translateY=Math.min(e.containerHeight,e.translateY);e.translateY=Math.round(e.translateY);e.lastViewportTop=e.viewportTop;return n}},{key:"_getAffixTypeScrollingDown",value:function t(){var e=this.dimensions;var i=e.sidebarHeight+e.containerTop;var n=e.viewportTop+e.topSpacing;var r=e.viewportBottom-e.bottomSpacing;var s=this.affixedType;if(this.isSidebarFitsViewport()){if(e.sidebarHeight+n>=e.containerBottom){e.translateY=e.containerBottom-i;s="CONTAINER-BOTTOM"}else if(n>=e.containerTop){e.translateY=n-e.containerTop;s="VIEWPORT-TOP"}}else{if(e.containerBottom<=r){e.translateY=e.containerBottom-i;s="CONTAINER-BOTTOM"}else if(i+e.translateY<=r){e.translateY=r-i;s="VIEWPORT-BOTTOM"}else if(e.containerTop+e.translateY<=n&&0!==e.translateY&&e.maxTranslateY!==e.translateY){s="VIEWPORT-UNBOTTOM"}}return s}},{key:"_getAffixTypeScrollingUp",value:function t(){var e=this.dimensions;var i=e.sidebarHeight+e.containerTop;var n=e.viewportTop+e.topSpacing;var r=e.viewportBottom-e.bottomSpacing;var s=this.affixedType;if(n<=e.translateY+e.containerTop){e.translateY=n-e.containerTop;s="VIEWPORT-TOP"}else if(e.containerBottom<=r){e.translateY=e.containerBottom-i;s="CONTAINER-BOTTOM"}else if(!this.isSidebarFitsViewport()){if(e.containerTop<=n&&0!==e.translateY&&e.maxTranslateY!==e.translateY){s="VIEWPORT-UNBOTTOM"}}return s}},{key:"_getStyle",value:function t(e){if("undefined"===typeof e)return;var i={inner:{},outer:{}};var n=this.dimensions;switch(e){case"VIEWPORT-TOP":i.inner={position:"fixed",top:n.topSpacing,left:n.sidebarLeft-n.viewportLeft,width:n.sidebarWidth};break;case"VIEWPORT-BOTTOM":i.inner={position:"fixed",top:"auto",left:n.sidebarLeft,bottom:n.bottomSpacing,width:n.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var r=this._getTranslate(0,n.translateY+"px");if(r)i.inner={transform:r};else i.inner={position:"absolute",top:n.translateY,width:n.sidebarWidth};break}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":i.outer={height:n.sidebarHeight,position:"relative"};break}i.outer=h.extend({height:"",position:""},i.outer);i.inner=h.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},i.inner);return i}},{key:"stickyPosition",value:function t(e){if(this._breakpoint)return;e=this._reStyle||e||false;var i=this.options.topSpacing;var n=this.options.bottomSpacing;var r=this.getAffixType();var s=this._getStyle(r);if((this.affixedType!=r||e)&&r){var o="affix."+r.toLowerCase().replace("viewport-","")+d;h.eventTrigger(this.sidebar,o);if("STATIC"===r)h.removeClass(this.sidebar,this.options.stickyClass);else h.addClass(this.sidebar,this.options.stickyClass);for(var a in s.outer){var l="number"===typeof s.outer[a]?"px":"";this.sidebar.style[a]=s.outer[a]+l}for(var c in s.inner){var p="number"===typeof s.inner[c]?"px":"";this.sidebarInner.style[c]=s.inner[c]+p}var f="affixed."+r.toLowerCase().replace("viewport-","")+d;h.eventTrigger(this.sidebar,f)}else{if(this._initialized)this.sidebarInner.style.left=s.inner.left}this.affixedType=r}},{key:"_widthBreakpoint",value:function t(){if(window.innerWidth<=this.options.minWidth){this._breakpoint=true;this.affixedType="STATIC";this.sidebar.removeAttribute("style");h.removeClass(this.sidebar,this.options.stickyClass);this.sidebarInner.removeAttribute("style")}else{this._breakpoint=false}}},{key:"updateSticky",value:function t(){var e=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(this._running)return;this._running=true;(function(t){requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll();e.observeScrollDir();e.stickyPosition();break;case"resize":default:e._widthBreakpoint();e.calcDimensions();e.stickyPosition(true);break}e._running=false})})(i.type)}},{key:"_setSupportFeatures",value:function t(){var e=this.support;e.transform=h.supportTransform();e.transform3d=h.supportTransform(true)}},{key:"_getTranslate",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(this.support.transform3d)return"translate3d("+e+", "+i+", "+n+")";else if(this.support.translate)return"translate("+e+", "+i+")";else return false}},{key:"destroy",value:function t(){window.removeEventListener("resize",this,{capture:false});window.removeEventListener("scroll",this,{capture:false});this.sidebar.classList.remove(this.options.stickyClass);this.sidebar.style.minHeight="";this.sidebar.removeEventListener("update"+d,this);var e={inner:{},outer:{}};e.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""};e.outer={height:"",position:""};for(var i in e.outer){this.sidebar.style[i]=e.outer[i]}for(var n in e.inner){this.sidebarInner.style[n]=e.inner[n]}if(this.options.resizeSensor&&"undefined"!==typeof ResizeSensor){ResizeSensor.detach(this.sidebarInner,this.handleEvent);ResizeSensor.detach(this.container,this.handleEvent)}}}],[{key:"supportTransform",value:function t(e){var i=false,n=e?"perspective":"transform",r=n.charAt(0).toUpperCase()+n.slice(1),s=["Webkit","Moz","O","ms"],o=document.createElement("support"),a=o.style;(n+" "+s.join(r+" ")+r).split(" ").forEach(function(t,e){if(a[t]!==undefined){i=t;return false}});return i}},{key:"eventTrigger",value:function t(e,i,n){try{var r=new CustomEvent(i,{detail:n})}catch(t){var r=document.createEvent("CustomEvent");r.initCustomEvent(i,true,true,n)}e.dispatchEvent(r)}},{key:"extend",value:function t(e,i){var n={};for(var r in e){if("undefined"!==typeof i[r])n[r]=i[r];else n[r]=e[r]}return n}},{key:"offsetRelative",value:function t(e){var i={left:0,top:0};do{var n=e.offsetTop;var r=e.offsetLeft;if(!isNaN(n))i.top+=n;if(!isNaN(r))i.left+=r;e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return i}},{key:"addClass",value:function t(e,i){if(!h.hasClass(e,i)){if(e.classList)e.classList.add(i);else e.className+=" "+i}}},{key:"removeClass",value:function t(e,i){if(h.hasClass(e,i)){if(e.classList)e.classList.remove(i);else e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}}},{key:"hasClass",value:function t(e,i){if(e.classList)return e.classList.contains(i);else return new RegExp("(^| )"+i+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return n}}]);return h}();return t}();t.default=i,window.StickySidebar=i}(e)});return t(i),t(e(function(t,e){var s;s=function(t){return t&&t.__esModule?t:{default:t}}(i),function(){var n,r,t;"undefined"!=typeof window&&(r="stickySidebar",(n=window.$||window.jQuery||window.Zepto)&&(n.fn.stickySidebar=function(i){return this.each(function(){var t=n(this),e=n(this).data(r);if(e||(e=new s.default(this,"object"==typeof i&&i),t.data(r,e)),"string"==typeof i){if(void 0===e[i]&&-1===["destroy","updateSticky"].indexOf(i))throw new Error('No method named "'+i+'"');e[i]()}})},n.fn.stickySidebar.Constructor=s.default,t=n.fn.stickySidebar,n.fn.stickySidebar.noConflict=function(){return n.fn.stickySidebar=t,this}))}()}))});